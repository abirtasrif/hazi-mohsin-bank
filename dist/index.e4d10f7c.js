"use strict";const accounts=[{owner:"Mehedi Hasan",movements:[2500,500,-750,1200,3200,-1500,500,1200,-1750,1800],interestRate:1.5,password:1234,movementsDates:["2021-11-18T21:31:17.178Z","2021-12-23T07:42:02.383Z","2022-01-28T09:15:04.904Z","2022-04-01T10:17:24.185Z","2022-07-08T14:11:59.604Z","2022-09-10T17:01:17.194Z","2022-09-12T23:36:17.929Z","2022-09-20T12:51:31.398Z","2022-09-28T06:41:26.190Z","2022-09-29T08:11:36.678Z"],currency:"USD",locale:"en-US"},{owner:"Abir Tasrif",movements:[5e3,3400,-150,-790,-3210,-1e3,8500,-300,1500,-1850],interestRate:1.3,password:4321,movementsDates:["2021-12-11T21:31:17.671Z","2021-12-27T07:42:02.184Z","2022-01-05T09:15:04.805Z","2022-02-14T10:17:24.687Z","2022-03-12T14:11:59.203Z","2022-05-16T17:01:17.392Z","2022-08-10T23:36:17.522Z","2022-09-03T12:51:31.491Z","2022-09-18T06:41:26.394Z","2022-09-21T08:11:36.276Z"],currency:"EUR",locale:"en-GB"},{owner:"Louise Lucas",movements:[2500,1400,-1150,-1790,-210,-800,9500,-300,1500,-1850],interestRate:1.3,password:1234,movementsDates:["2021-12-11T21:31:17.671Z","2021-12-27T07:42:02.184Z","2022-01-05T09:15:04.805Z","2022-02-14T10:17:24.687Z","2022-03-12T14:11:59.203Z","2022-05-16T17:01:17.392Z","2022-08-10T23:36:17.522Z","2022-09-03T12:51:31.491Z","2022-09-18T06:41:26.394Z","2022-09-21T08:11:36.276Z"],currency:"EUR",locale:"fr-FR"},{owner:"Babel Mahmud",movements:[2500,500,-750,1200,3200,-1500,500,1200,-1750,1800],interestRate:1.5,password:1234,movementsDates:["2021-11-18T21:31:17.178Z","2021-12-23T07:42:02.383Z","2022-01-28T09:15:04.904Z","2022-04-01T10:17:24.185Z","2022-07-08T14:11:59.604Z","2022-09-10T17:01:17.194Z","2022-09-12T23:36:17.929Z","2022-09-15T12:51:31.398Z","2022-09-19T06:41:26.190Z","2022-09-21T08:11:36.678Z"],currency:"BDT",locale:"bn-BD"}],labelWelcome=document.querySelector(".welcome"),labelDate=document.querySelector(".date"),labelBalance=document.querySelector(".balance-value"),labelSumIn=document.querySelector(".summary-value-in"),labelSumOut=document.querySelector(".summary-value-out"),labelSumInterest=document.querySelector(".summary-value-interest"),labelTimer=document.querySelector(".timer"),containerApp=document.querySelector(".app"),containerMovements=document.querySelector(".movements"),btnLogin=document.querySelector(".login-btn"),btnTransfer=document.querySelector(".form-btn-transfer"),btnLoan=document.querySelector(".form-btn-loan"),btnClose=document.querySelector(".form-btn-close"),btnSort=document.querySelector(".btn-sort"),inputLoginUsername=document.querySelector(".login-input-username"),inputLoginPassword=document.querySelector(".login-input-password"),inputTransferTo=document.querySelector(".form-input-to"),inputTransferAmount=document.querySelector(".form-input-amount"),inputLoanAmount=document.querySelector(".form-input-loan-amount"),inputCloseUsername=document.querySelector(".form-input-username"),inputClosePassword=document.querySelector(".form-input-password");function updateUI(e){displaySummary(e),displayMovements(e),displayBalance(e)}function formattingCurrency(e,t,n){return new Intl.NumberFormat(t,{style:"currency",currency:n}).format(e)}function formatMoveDate(e,t){const n=(r=new Date,o=e,Math.round(Math.abs(o-r)/864e5));var r,o;return 0===n?"Today":1===n?"Yesterday":n<=7?`${n} days ago`:new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}).format(e)}function createUsernames(e){e.forEach((e=>{e.username=e.owner.toLowerCase().split(" ").map((e=>e.at(0))).join("")}))}let currentAccount,timer;function displayMovements(e,t=!1){containerMovements.innerHTML="";(t?e.movements.slice(0).sort(((e,t)=>e-t)):e.movements).forEach(((t,n)=>{const r=t>0?"deposit":"withdrawal",o=formattingCurrency(t,currentAccount.locale,currentAccount.currency),a=`<div class="movements-row">\n    <div class="movements-type movements-type-${r}">${n+1} ${r}</div>\n    <div class="movements-date">${formatMoveDate(new Date(e.movementsDates[n]),e.locale)}</div>\n    <div class="movements-value">${o}</div>\n  </div>`;containerMovements.insertAdjacentHTML("afterbegin",a)}))}function displaySummary(e){const t=e.movements.filter((e=>e>0)).reduce(((e,t)=>e+t),0);labelSumIn.textContent=formattingCurrency(t,e.locale,e.currency);const n=e.movements.filter((e=>e<0)).reduce(((e,t)=>e+t),0);labelSumOut.textContent=formattingCurrency(Math.abs(n),e.locale,e.currency);const r=e.movements.filter((e=>e>0)).map((t=>t*e.interestRate/100)).filter((e=>e>=1)).reduce(((e,t)=>e+t),0);labelSumInterest.textContent=formattingCurrency(r,e.locale,e.currency)}function displayBalance(e){e.balance=e.movements.reduce(((e,t)=>e+t),0),labelBalance.textContent=formattingCurrency(e.balance,e.locale,e.currency)}createUsernames(accounts),btnLogin.addEventListener("click",(function(e){e.preventDefault(),currentAccount=accounts.find((e=>e.username===inputLoginUsername.value)),currentAccount?.password===Number(inputLoginPassword.value)?setTimeout((()=>{labelWelcome.textContent=`Welcome back, ${currentAccount.owner.split(" ").at(0)}`,containerApp.style.opacity=1;const e=new Date;labelDate.textContent=new Intl.DateTimeFormat(currentAccount.locale,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}).format(e),timer&&clearInterval(timer),timer=logOut(),updateUI(currentAccount)}),1e3):setTimeout((()=>{labelWelcome.textContent="Access Denied",containerApp.style.opacity=0}),1e3),inputLoginUsername.value=inputLoginPassword.value="",inputLoginPassword.blur()})),btnTransfer.addEventListener("click",(function(e){e.preventDefault();const t=accounts.find((e=>e.username===inputTransferTo.value)),n=Number(inputTransferAmount.value);inputTransferTo.value=inputTransferAmount.value="",inputTransferAmount.blur(),n>0&&n<=currentAccount.balance&&t.username!==currentAccount.username&&t?(setTimeout((()=>{currentAccount.movements.push(-n),t.movements.push(n),currentAccount.movementsDates.push((new Date).toISOString()),t.movementsDates.push((new Date).toISOString()),updateUI(currentAccount),labelWelcome.textContent="Transaction Successfull"}),1e3),timer&&clearInterval(timer),timer=logOut()):(setTimeout((()=>{labelWelcome.textContent="Transaction Failed"}),1e3),timer&&clearInterval(timer),timer=logOut())})),btnLoan.addEventListener("click",(function(e){e.preventDefault();const t=Number(inputLoanAmount.value);t>0&&currentAccount.movements.some((e=>e>=.1*t))?setTimeout((()=>{currentAccount.movements.push(t),currentAccount.movementsDates.push((new Date).toISOString()),timer&&clearInterval(timer),timer=logOut(),updateUI(currentAccount),labelWelcome.textContent="Loan Successful !"}),1e3):(setTimeout((()=>{labelWelcome.textContent="You are not eligible for loan !"}),1e3),timer&&clearInterval(timer),timer=logOut()),inputLoanAmount.value="",inputLoanAmount.blur()})),btnClose.addEventListener("click",(function(e){if(e.preventDefault(),currentAccount.username===inputCloseUsername.value&&currentAccount.password===Number(inputClosePassword.value)){const e=accounts.findIndex((e=>e.username===currentAccount.username));setTimeout((()=>{accounts.splice(e,1),containerApp.style.opacity=0,labelWelcome.textContent="Account Deleted !"}),1e3),timer&&clearInterval(timer),timer=logOut()}else setTimeout((()=>{labelWelcome.textContent="Can't be deleted !"}),1e3),timer&&clearInterval(timer),timer=logOut();inputCloseUsername.value=inputClosePassword.value="",inputClosePassword.blur()}));let sortedMove=!1;function logOut(){labelTimer.textContent="";let e=120;const t=()=>{const t=String(Math.trunc(e/60)).padStart(2,0),n=String(e%60).padStart(2,0);labelTimer.textContent=`${t}:${n}`,0===e&&(clearInterval(timer),labelWelcome.textContent="You've been logged out !",containerApp.style.opacity=0),e--};return t(),timer=setInterval(t,1e3),timer}btnSort.addEventListener("click",(function(e){e.preventDefault(),displayMovements(currentAccount,!sortedMove),sortedMove=!sortedMove}));
//# sourceMappingURL=index.e4d10f7c.js.map
